<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to My Silent Library</title>
    <meta name="description" content="A quiet space for thoughts, quotes, and stories.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="assets/css/tokens.css">
    <link rel="stylesheet" href="assets/css/landing.css">
</head>
<body>
    <div class="landing-wrapper">
        <main class="hero-section">
            <svg class="hero-icon" data-parallax-depth="5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
            <h1 class="hero-title" data-parallax-depth="10">Welcome to My Silent Library</h1>
            <p class="hero-subtitle" data-parallax-depth="15">A quiet space for thoughts, quotes, and stories.</p>
            <a href="library.html" id="enterBtn" class="hero-button" data-parallax-depth="20">Enter Library</a>
        </main>

        <footer class="landing-footer">
            <p>&copy; 2025 Ian Silent Library</p>
            <button id="themeToggle" class="theme-toggle" aria-label="Switch to light mode">
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </button>
            <div id="theme-announcer" class="sr-only" aria-live="polite"></div>
        </footer>
    </div>

    <script src="assets/js/theme.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const wrapper = document.querySelector('.landing-wrapper');
            const heroTitle = document.querySelector('.hero-title');
            const enterButton = document.getElementById('enterBtn');

            // 1. Animate title with a letter-by-letter stagger effect
            if (heroTitle) {
                const text = heroTitle.textContent;
                heroTitle.innerHTML = ''; // Clear original text
                text.split('').forEach(char => {
                    const span = document.createElement('span');
                    span.className = 'letter';
                    // Use &nbsp; for spaces to ensure they take up space and can be animated
                    span.innerHTML = char === ' ' ? '&nbsp;' : char;
                    heroTitle.appendChild(span);
                });

                document.querySelectorAll('.hero-title .letter').forEach((letter, index) => {
                    letter.style.animationDelay = `${index * 50}ms`;
                    letter.classList.add('letter-fade-in');
                });
            }

            // 2. Animate other elements after the title animation begins
            const otherElements = document.querySelectorAll('.hero-icon, .hero-subtitle, .hero-button, .landing-footer');
            otherElements.forEach((el, index) => {
                el.style.animationDelay = `${(index * 150) + 500}ms`;
                el.classList.add('fade-in');
            });

            // 3. Interactive parallax effect on mouse move
            const parallaxItems = document.querySelectorAll('[data-parallax-depth]');
            if (wrapper && parallaxItems.length > 0) {
                wrapper.addEventListener('mousemove', (e) => {
                    const { clientX, clientY } = e;
                    const { offsetWidth, offsetHeight } = wrapper;

                    // Calculate mouse position from center (-1 to 1)
                    const x = (clientX / offsetWidth - 0.5) * 2;
                    const y = (clientY / offsetHeight - 0.5) * 2;

                    parallaxItems.forEach(item => {
                        const depth = parseFloat(item.dataset.parallaxDepth);
                        const moveX = -x * depth;
                        const moveY = -y * depth;
                        item.style.transform = `translate(${moveX}px, ${moveY}px)`;
                    });
                });
            }

            // 4. Smooth exit transition
            if (enterButton && wrapper) {
                enterButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    const destination = enterButton.href;
                    wrapper.classList.add('is-exiting');
                    setTimeout(() => {
                        window.location.href = destination;
                    }, 500); // Match the animation duration in CSS
                });
            }
        });
    </script>
</body>
</html>